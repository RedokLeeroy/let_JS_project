function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequired7c6;function i(){const e=document.querySelector('[data-action="close-modal-1"]'),t=document.querySelector(".modal-film"),n=document.querySelector(".backdrop");e.addEventListener("click",(e=>{t.innerHTML="",document.body.classList.remove("hidden")})),n.addEventListener("click",(e=>{e.currentTarget===e.target&&(t.innerHTML="",document.body.classList.remove("hidden"))})),window.addEventListener("keydown",(function e(n){"Escape"===n.code&&(t.innerHTML="",window.removeEventListener("keydown",e),document.body.classList.remove("hidden"))}))}null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=o),o.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}}));const r=JSON.parse(localStorage.getItem("library-watched")),l=JSON.parse(localStorage.getItem("library-queie"));let s=[],c=[];function d(e){console.log("add watch");const t=document.querySelector(".btn-list__item-btn--add");t.addEventListener("click",(()=>{e.inLocalStorage=!0,e.isWatched=!0,t.textContent="Added!",t.disabled=!0;const n=JSON.parse(localStorage.getItem("library-watched"));let a=[];n.map((e=>{a.push(e.id)})),a.find((t=>t===e.id))||(s.push(e),localStorage.setItem("library-watched",JSON.stringify(s)))}))}function u(e){console.log("add queue");const t=document.querySelector(".btn-list__item-btn--queie");t.addEventListener("click",(()=>{e.inLocalStorage=!0,e.isQueued=!0,t.textContent="Added!",t.disabled=!0;const n=JSON.parse(localStorage.getItem("library-queie"));let a=[];n.map((e=>{a.push(e.id)})),a.find((t=>t===e.id))||(c.push(e),localStorage.setItem("library-queie",JSON.stringify(c)))}))}r||localStorage.setItem("library-watched",JSON.stringify(s)),r.length?s=JSON.parse(localStorage.getItem("library-watched")):localStorage.setItem("library-watched",JSON.stringify(s)),l||localStorage.setItem("library-queie",JSON.stringify(c)),l.length?c=JSON.parse(localStorage.getItem("library-queie")):localStorage.setItem("library-queie",JSON.stringify(c));var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(e,t,n){m.default(e,t),t.set(e,n)};var p,m=(p=o("7K24o"))&&p.__esModule?p:{default:p};var y=new WeakMap,b=new WeakMap;class h{async getMovies(e=this.page){try{return await fetch(`${this.BASE_URL}trending/movie/day${this.API_KEY}&page=${e}`).then((e=>e.json()))}catch(e){console.log(e)}}async getSearchMovie(e,t){try{return await fetch(`${this.BASE_URL}search/movie${this.API_KEY}&query=${e}&page=${t}`).then((e=>e.json()))}catch(e){console.log(err)}}async getGanres(){try{return await fetch(`${this.BASE_URL}genre/movie/list${this.API_KEY}`).then((e=>e.json()))}catch(e){console.log(err)}}resetPage(){this.page=1}constructor(){e(g)(this,y,{writable:!0,value:"https://api.themoviedb.org/3/"}),e(g)(this,b,{writable:!0,value:"?api_key=7a4cd4317772102a9b88ef6a54b71590"}),this.page=1,this.BASE_URL="https://api.themoviedb.org/3/",this.API_KEY="?api_key=7a4cd4317772102a9b88ef6a54b71590"}}new h;function f(e){return e.map((({id:e,poster_path:t,release_date:n,title:a,vote_average:o,genre_name:i})=>{const r=o.toString().slice(0,3);let l,s;l=new Date(n).getFullYear();let c='<span class="vertical-line">|</span>';i.length>3?s=i.slice(0,2).join(", ")+", Other":0===i.length?(c="",s=""):s=i.join(", ");let d=`https://image.tmdb.org/t/p/w500${t}`;return t||(d="https://i.ibb.co/JyBCdzw/sinema-empty.jpg"),l||(l="Info is not available"),`\n          <li class="card_item grid-item" id=${e}>\n            <div class="card__image">\n              <img class="image" src=${d} alt="${a}" loading="lazy" />\n              </div>\n\n            <h1 class="card__title">${a}</h1>\n            <div class="card__info">\n              <div class="card__genres">\n                <span class="genre">${s}</span>\n              </div>\n              ${c}\n              <span class="card__year">${l}</span>\n              <span class='card__average on-library'>${r}</span>\n            </div>\n          </li>\n        `})).join("")}const _={container:document.querySelector(".pagination-container"),leftArrow:document.querySelector(".left-arrow"),rightArrow:document.querySelector(".rightArrow")};new h;function v(e,t){if(!e||!t||1===t)return;let n="";e>1&&(n+='<li class="button style_color">&loarr;</li>'),e>2&&(n+='<li class="button style_enpty">1</li>'),e>4&&(n+='<li class="button">&middot&middot&middot</li>'),e>3&&(n+=`<li class="button style_enpty">${e-2}</li>`),e>1&&(n+=`<li class="button style_enpty">${e-1}</li>`),n+=`<li class = 'pagination-active'>${e}</li>`,e+1<t&&(n+=`<li class="button style_enpty">${e+1}</li>`),e+2<t&&(n+=`<li class="button style_enpty">${e+2}</li>`),t>e+3&&(n+='<li class="button">&middot&middot&middot</li>'),t>e&&(n+=`<li class="button style_enpty">${t}</li>`),t>e&&(n+='<li class="button style_color">&roarr;</li>'),_.container.innerHTML=n}let S;function w(e){let t=[];e.forEach((e=>{let n=S.find((t=>t.id===e));t.push(n)}));return t.map((e=>e.name))}(new h).getGanres().then((function(e){S=e.genres}));const L=document.querySelector(".gallery"),q=document.querySelector(".pagination-container"),$=new h;let E=1;function M(e){e.inLocalStorage||e.results.forEach((e=>{!function(e,t){const n=e;n.genre_name=t,n.isWatched=!1,n.isQueued=!1}(e,w(e.genre_ids))}));let t=e.results;return L.innerHTML=f(e.results),v(e.page,e.total_pages),q.addEventListener("click",x),t}function x(e){if("LI"!==e.target.tagName||"..."===e.target.textContent)return;const t=e.target.textContent;E="⇽"===t?Number(E)-1:"⇾"===t?Number(E)+1:t,$.getMovies(E).then((e=>{j(M(e))}))}function N(e){console.log("remove watch");const t=document.querySelector(".btn-list__item-btn--add"),n=document.querySelector("[data-page]"),a=JSON.parse(localStorage.getItem("library-watched"));e.isWatched&&(t.textContent="Remove"),t.addEventListener("click",(()=>{let o=[],i=a.filter((t=>t.id!==e.id));if(a.map((e=>{o.push(e.id)})),!o.find((t=>t===e.id)))return;const r={page:1,results:i,total_pages:0,inLocalStorage:!1,isWatched:!1};"library"===n.dataset.page&&M(r),t.textContent="Removed!",t.disabled=!0,localStorage.setItem("library-watched",JSON.stringify(i))}))}function I(e){console.log("remove queue");const t=document.querySelector(".btn-list__item-btn--queie"),n=document.querySelector("[data-page]"),a=JSON.parse(localStorage.getItem("library-queie"));e.isQueued&&(t.textContent="Remove"),t.addEventListener("click",(()=>{let o=[],i=a.filter((t=>t.id!==e.id));if(a.map((e=>{o.push(e.id)})),!o.find((t=>t===e.id)))return;const r={page:1,results:i,total_pages:0,inLocalStorage:!1,isQueued:!1};"library"===n.dataset.page&&M(r),t.textContent="Removed!",t.disabled=!0,localStorage.setItem("library-queie",JSON.stringify(i))}))}function O(e){const t=JSON.parse(localStorage.getItem("library-watched")),n=JSON.parse(localStorage.getItem("library-queie"));let a=[],o=[];t.map((e=>{a.push(e.id)})),n.map((e=>{o.push(e.id)})),a.find((t=>t===e.id))?N(e):d(e),o.find((t=>t===e.id))?I(e):u(e)}const k=document.querySelector(".modal-film"),J=document.querySelector(".gallery");let T,A;function C(e){if(!e.target.closest("li"))return;!function(e){const t=A.find((t=>t.id===Number(e)));T=t;const{original_title:n,popularity:a,vote_average:o,vote_count:i,overview:r,poster_path:l,title:s,genre_name:c}=t,d=o.toString().slice(0,3),u=Math.floor(a),g=c.join(", "),p=`\n  <div class='backdrop'>\n    <div class='modal-container'>\n      <button class="btn-close" type="button" data-action='close-modal-1'></button>\n      <div class='cont-preview' >\n        <img class='cont-prew__image' src="https://image.tmdb.org/t/p/w500${l}" alt="${s}" loading="lazy" />\n      </div>\n      \n      <div class='modal-content'>\n        <h3 class='film-title'>${n}</h3>\n          <table class='table'>\n        <tbody>\n          <tr>\n            <td><p class='table-text__left'>Vote / Votes</p></td>\n            <td>\n              <p class='table-text__right'>\n                <span class='average'>${d}</span>\n                <span class='awerage-dot'> /</span> ${i}\n              </p>\n            </td>\n            </tr>\n          <tr>\n            <td><p class='table-text__left'>Popularity</p></td>\n            <td><p class='table-text__right'>${u}</p></td>\n          </tr>\n            <tr>\n            <td><p class='table-text__left'>Original Title</p></td>\n            <td><p class='table-text__right '>${n}</p></td>\n          </tr>\n            <tr>\n            <td><p class='table-text__left'>Genre</p></td>\n            <td><p class='table-text__right '>${g}</p></td>\n          </tr>\n        </tbody>\n        </table>\n          <p class='descr-text'>About</p>\n          <p class='descr-text-content '> ${r}</p>\n        <ul class='btn-list'>\n          <li class='btn-list__item'>\n           <button class='btn-list__item-btn--add' type="button">add to Watched</button>\n          </li>\n          <li class='btn-list__item'>\n            <button class='btn-list__item-btn--queie' type="button">add to queue</button>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  `;k.insertAdjacentHTML("afterbegin",p)}(e.target.closest("li").id),i(),O(T),document.body.classList.add("hidden")}function j(e){J.addEventListener("click",C),A=e}const H={openModalBtn:document.querySelector(".open-btn"),closeModalBtn:document.querySelector(".close-btn"),modal:document.querySelector(".modal")};function R(e){e.preventDefault(),H.modal.classList.toggle("is-hidden"),H.closeModalBtn.addEventListener("click",R),"hidden"===document.body.style.overflow?document.body.style.overflow="auto":document.body.style.overflow="hidden"}H.openModalBtn.addEventListener("click",R);const B=document.querySelector(".load-wrapp");function P(e){"show"===e&&B.classList.remove("is-hidden"),"hide"===e&&B.classList.add("is-hidden")}const W=new h,K=document.querySelector(".search-input"),U=(document.querySelector(".gallery"),document.querySelector(".error")),D=document.querySelector(".pagination-container");let Y=1;function z(e){0===e.total_results||""===K.value.trim()?(D.innerHTML="",U.innerHTML="Search result not successful. Enter the correct movie name and"):v(e.page,e.total_pages);return j(M(e)),D.removeEventListener("click",x),D.addEventListener("click",Q),e.results}function Q(e){if("LI"!==e.target.tagName||"..."===e.target.textContent)return;const t=e.target.textContent;Y="⇽"===t?Number(Y)-1:"⇾"===t?Number(Y)+1:t,W.getSearchMovie(K.value,Y).then(z)}document.querySelector(".search-form").addEventListener("submit",(function(e){if(e.preventDefault(),""===K.value.trim())return void(U.innerHTML="Please enter any text");U.innerHTML="",Y=1,P("show"),W.getSearchMovie(K.value,Y).then((e=>{if(0===e.total_results)return U.innerHTML="Search result not successful. Enter the correct movie name and",void P("hide");const t=M(e);z(e),j(t),P("hide")}))})),$.getMovies().then((e=>{j(M(e))}));
//# sourceMappingURL=index.32a3c592.js.map

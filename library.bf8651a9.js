function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},r=n.parcelRequired7c6;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},n.parcelRequired7c6=r),r.register("6MKTW",(function(t,n){e(t.exports,"getApiList",(function(){return g})),e(t.exports,"handleSuccess",(function(){return m})),e(t.exports,"handlePagination",(function(){return f}));var o=r("696Am"),a=r("l4JjG"),i=r("kcQhl"),l=r("8huCE"),s=r("jDdlf");const c=document.querySelector(".gallery"),d=document.querySelector(".pagination-container"),u=new(0,o.ThemoviedbAPI);let p=1;function g(){u.getMovies().then((e=>{const t=m(e);(0,i.renderModalFilm)(t)}))}function m(e){e.inLocalStorage||e.results.forEach((e=>{!function(e,t){const n=e;n.genre_name=t,n.isWatched=!1,n.isQueued=!1}(e,(0,s.serchGenre)(e.genre_ids))}));let t=e.results;return c.innerHTML=(0,a.createCard)(e.results),(0,l.renderPagination)(e.page,e.total_pages),d.addEventListener("click",f),t}function f(e){if("LI"!==e.target.tagName||"..."===e.target.textContent)return;const t=e.target.textContent;p="⇽"===t?Number(p)-1:"⇾"===t?Number(p)+1:t,u.getMovies(p).then((e=>{const t=m(e);(0,i.renderModalFilm)(t)}))}})),r.register("696Am",(function(n,o){e(n.exports,"ThemoviedbAPI",(function(){return s}));var a=r("g6yUq"),i=new WeakMap,l=new WeakMap;class s{async getMovies(e=this.page){try{return await fetch(`${this.BASE_URL}trending/movie/day${this.API_KEY}&page=${e}`).then((e=>e.json()))}catch(e){console.log(e)}}async getSearchMovie(e,t){try{return await fetch(`${this.BASE_URL}search/movie${this.API_KEY}&query=${e}&page=${t}`).then((e=>e.json()))}catch(e){console.log(e)}}async getGanres(){try{return await fetch(`${this.BASE_URL}genre/movie/list${this.API_KEY}`).then((e=>e.json()))}catch(e){console.log(e)}}resetPage(){this.page=1}constructor(){t(a)(this,i,{writable:!0,value:"https://api.themoviedb.org/3/"}),t(a)(this,l,{writable:!0,value:"?api_key=7a4cd4317772102a9b88ef6a54b71590"}),this.page=1,this.BASE_URL="https://api.themoviedb.org/3/",this.API_KEY="?api_key=7a4cd4317772102a9b88ef6a54b71590"}}})),r.register("g6yUq",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){o.default(e,t),t.set(e,n)};var n,o=(n=r("7K24o"))&&n.__esModule?n:{default:n}})),r.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),r.register("l4JjG",(function(t,n){e(t.exports,"createCard",(function(){return o}));new(0,r("696Am").ThemoviedbAPI);function o(e){return e.map((({id:e,poster_path:t,release_date:n,title:o,vote_average:a,genre_name:r})=>{const i=a.toString().slice(0,3);let l,s;l=new Date(n).getFullYear();let c='<span class="vertical-line">|</span>';r.length>3?s=r.slice(0,2).join(", ")+", Other":0===r.length?(c="",s=""):s=r.join(", ");let d=`https://image.tmdb.org/t/p/w500${t}`;return t||(d="https://i.ibb.co/JyBCdzw/sinema-empty.jpg"),l||(l="Info is not available"),`\n          <li class="card_item grid-item" id=${e}>\n            <div class="card__image">\n              <img class="image" src=${d} alt="${o}" loading="lazy" />\n              </div>\n\n            <h1 class="card__title">${o}</h1>\n            <div class="card__info">\n              <div class="card__genres">\n                <span class="genre">${s}</span>\n              </div>\n              ${c}\n              <span class="card__year">${l}</span>\n              <span class='card__average on-library'>${i}</span>\n            </div>\n          </li>\n        `})).join("")}})),r.register("kcQhl",(function(t,n){e(t.exports,"renderModalFilm",(function(){return f}));var o=r("fMLtE"),a=r("7xZZN");const i="library-watched",l="library-queie",s=document.querySelector(".modal-film"),c=document.querySelector(".gallery"),d=document.querySelector("html");document.querySelector("[data-page]"),document.querySelector(".active__watched"),document.querySelector(".active__queued");let u,p,g;function m(e){if(!e.target.closest("li"))return;!function(e){const t=JSON.parse(localStorage.getItem(i)),n=JSON.parse(localStorage.getItem(l)),o=g.find((t=>t.id===Number(e)));p=o;const{original_title:a,popularity:r,vote_average:c,vote_count:d,overview:u,poster_path:m,title:f,genre_name:b}=o;let y="https://i.ibb.co/JyBCdzw/sinema-empty.jpg",h=`https://image.tmdb.org/t/p/w500${m}`;m||(h=y);const _=t.find((t=>t.id===Number(e))),v=n.find((t=>t.id===Number(e))),S=c.toString().slice(0,3),w=Math.floor(r),q=b.join(", "),x=`\n  <div class='backdrop'>\n    <div class='modal-container'>\n      <button class="btn-close" type="button" data-action='close-modal-1'></button>\n      <div class='cont-preview' >\n        <img class='cont-prew__image' src="https://image.tmdb.org/t/p/w500${m}" alt="${f}" loading="lazy" />\n      </div>\n      \n      <div class='modal-content'>\n        <h3 class='film-title'>${a}</h3>\n          <table class='table'>\n        <tbody>\n          <tr>\n            <td><p class='table-text__left'>Vote / Votes</p></td>\n            <td>\n              <p class='table-text__right'>\n                <span class='average'>${S}</span>\n                <span class='awerage-dot'> /</span> ${d}\n              </p>\n            </td>\n            </tr>\n          <tr>\n            <td><p class='table-text__left'>Popularity</p></td>\n            <td><p class='table-text__right'>${w}</p></td>\n          </tr>\n            <tr>\n            <td><p class='table-text__left'>Original Title</p></td>\n            <td><p class='table-text__right '>${a}</p></td>\n          </tr>\n            <tr>\n            <td><p class='table-text__left'>${q.length?"Genre":""}</p></td>\n            <td><p class='table-text__right '>${q}</p></td>\n          </tr>\n        </tbody>\n        </table>\n          <p class='descr-text'>About</p>\n          <p class='descr-text-content '> ${u}</p>\n        <ul class='btn-list'>\n          <li class='btn-list__item'>\n           <button class='btn-list__item-btn--add' type="button">${_?"remove":"add to watched"}</button>\n          </li>\n          <li class='btn-list__item'>\n            <button class='btn-list__item-btn--queie' type="button">${v?"remove":"add to queued"}</button>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  `;s.insertAdjacentHTML("afterbegin",x)}(e.target.closest("li").id),(0,a.default)(p),u=window.pageYOffset||document.documentElement.scrollTop,(0,o.default)(u),d.style.top=` -${u}px`,d.style.left="0px",d.classList.add("hidden")}function f(e){c.addEventListener("click",m),g=e}})),r.register("fMLtE",(function(t,n){function o(e){const t=document.querySelector('[data-action="close-modal-1"]'),n=document.querySelector(".modal-film"),o=document.querySelector(".backdrop"),a=document.querySelector("html");t.addEventListener("click",(t=>{n.innerHTML="",a.style.top=null,a.style.left=null,a.classList.remove("hidden"),window.scrollTo({top:e})})),o.addEventListener("click",(t=>{t.currentTarget===t.target&&(n.innerHTML="",a.style.top=null,a.style.left=null,a.classList.remove("hidden"),window.scrollTo({top:e}))})),window.addEventListener("keydown",(function t(o){"Escape"===o.code&&(n.innerHTML="",window.removeEventListener("keydown",t),a.style.top=null,a.style.left=null,a.classList.remove("hidden"),window.scrollTo({top:e}))}))}e(t.exports,"default",(function(){return o}))})),r.register("7xZZN",(function(t,n){e(t.exports,"default",(function(){return i}));var o=r("gc9qg"),a=(o=r("gc9qg"),r("3dORF"));a=r("3dORF");function i(e){const t=JSON.parse(localStorage.getItem("library-watched")),n=JSON.parse(localStorage.getItem("library-queie"));let r=[],i=[];t.map((e=>{r.push(e.id)})),n.map((e=>{i.push(e.id)})),r.find((t=>t===e.id))?(0,a.removeFromWatch)(e):(0,o.addToWatch)(e),i.find((t=>t===e.id))?(0,a.removeFromQueue)(e):(0,o.addQueue)(e)}})),r.register("gc9qg",(function(t,n){e(t.exports,"addToWatch",(function(){return l})),e(t.exports,"addQueue",(function(){return s}));var o=r("3dORF");o=r("3dORF");const a="library-watched",i="library-queie";function l(e){let t=[];const n=document.querySelector(".btn-list__item-btn--add");n.textContent="add to watched",n.addEventListener("click",(()=>{const r=document.querySelector("[data-page]");e.inLocalStorage=!0,e.isWatched=!0,n.textContent="Added!",n.disabled=!0;const i=JSON.parse(localStorage.getItem(a));t=i;let l=[];i.map((e=>{l.push(e.id)})),l.find((t=>t===e.id))||(t.push(e),localStorage.setItem(a,JSON.stringify(t)),"home"===r.dataset.page&&(n.disabled=!1,(0,o.removeFromWatch)(e)))}))}function s(e){let t=[];const n=document.querySelector(".btn-list__item-btn--queie");n.textContent="add to queued",n.addEventListener("click",(()=>{const a=document.querySelector("[data-page]");e.inLocalStorage=!0,e.isQueued=!0,n.textContent="Added!",n.disabled=!0;const r=JSON.parse(localStorage.getItem(i));t=r;let l=[];r.map((e=>{l.push(e.id)})),l.find((t=>t===e.id))||(t.push(e),localStorage.setItem(i,JSON.stringify(t)),"home"===a.dataset.page&&(n.disabled=!1,(0,o.removeFromQueue)(e)))}))}})),r.register("3dORF",(function(t,n){e(t.exports,"removeFromWatch",(function(){return s})),e(t.exports,"removeFromQueue",(function(){return c}));var o=r("6MKTW"),a=r("gc9qg");a=r("gc9qg");const i="library-watched",l="library-queie";function s(e){const t=document.querySelector(".btn-list__item-btn--add"),n=document.querySelector(".btn-list__item-btn--queie"),r=document.querySelector("[data-page]"),l=document.querySelector(".placeholder"),s=JSON.parse(localStorage.getItem(i)),c=document.querySelector(".active__queued");e.isWatched&&(t.textContent="Remove"),c||"library"!==r.dataset.page||(n.disabled=!0),t.addEventListener("click",(()=>{let n=[],c=s.filter((t=>t.id!==e.id));if(s.map((e=>{n.push(e.id)})),!n.find((t=>t===e.id)))return;c.length||"library"!==r.dataset.page||(l.style.display="block");const d={page:1,results:c,total_pages:0,inLocalStorage:!1,isWatched:!1};"library"===r.dataset.page&&(0,o.handleSuccess)(d),t.textContent="Removed!",t.disabled=!0,localStorage.setItem(i,JSON.stringify(c)),"home"===r.dataset.page&&(t.disabled=!1,(0,a.addToWatch)(e))}))}function c(e){const t=document.querySelector(".btn-list__item-btn--add"),n=document.querySelector(".btn-list__item-btn--queie"),r=document.querySelector("[data-page]"),i=document.querySelector(".placeholder"),s=(document.querySelector(".modal-film"),document.querySelector(".active__watched")),c=JSON.parse(localStorage.getItem(l));e.isQueued&&(n.textContent="Remove"),s||"library"!==r.dataset.page||(t.disabled=!0),n.addEventListener("click",(()=>{let t=[],s=c.filter((t=>t.id!==e.id));if(c.map((e=>{t.push(e.id)})),!t.find((t=>t===e.id)))return;s.length||"library"!==r.dataset.page||(i.style.display="block");const d={page:1,results:s,total_pages:0,inLocalStorage:!1,isQueued:!1};"library"===r.dataset.page&&(0,o.handleSuccess)(d),n.textContent="Removed!",n.disabled=!0,localStorage.setItem(l,JSON.stringify(s)),"home"===r.dataset.page&&(n.disabled=!1,(0,a.addQueue)(e))}))}})),r.register("8huCE",(function(t,n){e(t.exports,"renderPagination",(function(){return a}));const o={container:document.querySelector(".pagination-container"),leftArrow:document.querySelector(".left-arrow"),rightArrow:document.querySelector(".rightArrow")};function a(e,t){if(!e||!t||1===t)return;let n="";e>1&&(n+='<li class="button style_color">&loarr;</li>'),e>2&&(n+='<li class="button style_enpty">1</li>'),e>4&&(n+='<li class="button">&middot&middot&middot</li>'),e>3&&(n+=`<li class="button style_enpty">${e-2}</li>`),e>1&&(n+=`<li class="button style_enpty">${e-1}</li>`),n+=`<li class = 'pagination-active'>${e}</li>`,e+1<t&&(n+=`<li class="button style_enpty">${e+1}</li>`),e+2<t&&(n+=`<li class="button style_enpty">${e+2}</li>`),t>e+3&&(n+='<li class="button">&middot&middot&middot</li>'),t>e&&(n+=`<li class="button style_enpty">${t}</li>`),t>e&&(n+='<li class="button style_color">&roarr;</li>'),o.container.innerHTML=n}})),r.register("jDdlf",(function(t,n){e(t.exports,"serchGenre",(function(){return a}));let o;function a(e){let t=[];e.forEach((e=>{let n=o.find((t=>t.id===e));t.push(n)}));return t.map((e=>e.name))}(new(0,r("696Am").ThemoviedbAPI)).getGanres().then((function(e){o=e.genres}))})),r.register("aHPgA",(function(e,t){const n=document.querySelector("#return-to-top");function o(e){(e.target.closest("li")||"A"===e.currentTarget.tagName)&&window.scrollTo({top:0,behavior:"smooth"})}document.querySelector(".pagination-container").addEventListener("click",o),n.addEventListener("click",o),window.onscroll=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?n.style.display="block":n.style.display="none"}}));
//# sourceMappingURL=library.bf8651a9.js.map
